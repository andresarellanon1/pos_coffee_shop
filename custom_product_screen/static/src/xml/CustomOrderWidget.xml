<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
	<t t-name="custom_product_screen.CustomOrderWidget" owl="1">
		<div class="container-fluid">
			<div t-if="_orderlinesArray.length === 0" class="w-100 vh-100 overflow-hidden grid d-flex flex-column gap-4 justify-content-center align-items-center">
				<div class="order-empty">
					Sin registros
				</div>
				<t t-if="isEmployee">
					<button class="w-50 py-2 btn bg-success text-light " t-on-click="() => this.trigger('click-sync-next-order')">
						Siguiente
					</button>
				</t>
				<t t-else="">
				</t>
			</div>
			<div t-else="" class="w-100 vh-100 overflow-hidden pt-2 grid d-flex flex-column justify-content-center align-items-center">
				<ul class="d-flex flex-column pt-2 w-100 h-75 overflow-auto">
					<li t-foreach="_orderlinesArray" t-as="orderline" t-key="orderline.id" class="d-flex m-0 p-0 container-fluid flex-column justify-content-between align-items-start h-auto border-bottom">
						<CustomOrderline line="orderline" />
					</li>
				</ul>
				<div class="d-flex h-25 row container-fluid py-4 bottom-m left-0 mb-2 border rounded " style="display: absolute;">
					<div class="col-7 d-flex flex-column container-fluid">
						<t t-set="_total" t-value="getTotal()" />
						<t t-set="_tax" t-value="getTax()" />
						<h6 class="d-flex container-fluid justify-content-between">
							<span>
								Total:
							</span>
							<t t-esc="_total" />
						</h6>
						<h6 t-if="_tax.hasTax" class="d-flex container-fluid justify-content-between">
							<span>
								IVA:
							</span>
							(
							<t t-esc="_tax.displayAmount" />
							)
						</h6>
					</div>
					<div class="col-5 d-flex flex-column grid gap-2 h-100">
						<button class="w-100 h-100 py-2 btn bg-danger text-light d-flex flex-grow-1 d-flex justify-content-center align-items-center" t-on-click="() => this.trigger('clear-order')">
							<h6>
								Cancelar
							</h6>
						</button>
						<t t-if="isEmployee">
							<button class="w-100 h-100 py-2 btn bg-success text-light d-flex flex-grow-1 d-flex justify-content-center align-items-center" t-on-click="() => this.trigger('click-pay')">
								<h6>
									Terminar pedido
								</h6>
							</button>
						</t>
						<t t-else="">
							<button class="w-100 h-100 py-2 btn bg-success text-light d-flex flex-grow-1 d-flex justify-content-center align-items-center" t-on-click="() => this.trigger('click-send')">
								T
								<h6>
									erminar pedido
								</h6>
							</button>
						</t>
					</div>
					<div class="fs-6 fst-italic fw-ligth">
						<t t-esc="currentOrder.name" />
					</div>
				</div>
			</div>
		</div>
	</t>
</templates>
