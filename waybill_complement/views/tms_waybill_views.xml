<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="inherited_tms_waybill_wc_view_form" model="ir.ui.view">
        <field name="name">inherited.tms.waybill.wc.view.form</field>
        <field name="model">tms.waybill</field>
        <field name="inherit_id" ref="tms.view_tms_waybill_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_order']" position="after">
                <field name="is_transfer" attrs="{'readonly': [('state', 'in', ('confirmed', 'cancel'))]}"/>
                <field name="enabled_multi_destinations" invisible="1"/>
            </xpath>

            <xpath expr="/form/sheet/notebook" position="inside">
                <page string="Destinations">
                    <field name="destination_ids" nolabel="1">
                        <tree>
                            <field name="name"/>
                            <field name="phone"/>
                            <field name="email"/>
                        </tree>
                    </field>
                </page>
            </xpath>

            <xpath expr="//field[@name='transportable_line_ids']" position="attributes">
                <attribute name="context">{'default_is_transfer': is_transfer, 'default_destination_ids': destination_ids,
                    'default_original_destination_id': arrival_address_id, 'default_enabled_line_multi_destinations': enabled_multi_destinations}</attribute>
            </xpath>

            <xpath expr="//field[@name='transportable_line_ids']/tree" position="inside">
                <field name="is_transfer" invisible="1"/>
                <field name="sat_merchandise_code_id" attrs="{'required': [('is_transfer', '=', False)], 'invisible': [('is_transfer', '=', True)]}"
                    options="{'no_create': True, 'no_create_edit':True}"/>
                <field name="merchandise_weight"/>
                <field name="hazardous_material_value" invisible="1"/>
                <field name="is_hazardous_material" attrs="{'invisible': [('hazardous_material_value', '=', '0')]}"/>
                <field name="hazardous_material_id" attrs="{'invisible': [('is_hazardous_material', '=', False)]}"
                    options="{'no_create': True, 'no_create_edit': True}"/>
                <field name="packaging_code_id" attrs="{'invisible': [('is_hazardous_material', '=', False)]}"
                    options="{'no_create': True, 'no_create_edit': True}"/>

                <field name="dummy_field" invisible="1"/>
                <field name="destination_ids" invisible="1"/>
                <field name="original_destination_id" invisible="1"/>
                <field name="enabled_line_multi_destinations" invisible="1"/>
                <field name="destination_id" options="{'no_create': True, 'no_create_edit': True, 'no_quick_create': True}"
                    context="{'show_address': 1}"
                    attrs="{'readonly': [('enabled_line_multi_destinations', '=', False)]}"
                    domain="['|', ('id', 'in', destination_ids), ('id', '=', original_destination_id)]"/>
            </xpath>
        </field>
    </record>
</odoo>
